<?xml version="1.0" encoding="UTF-8"?>
<sequence name="paymentMainSeq" xmlns="http://ws.apache.org/ns/synapse">

        <property expression="get-property('SYSTEM_TIME')" name="INSEQ_START" scope="default" type="LONG" xmlns:ns="http://org.apache.synapse/xsd"/>

 	<property expression="json-eval($.amountTransaction.clientCorrelator)"
        name="originalClientCorrelator" scope="default" type="STRING" xmlns:ns="http://org.apache.synapse/xsd"/>
    	<sequence key="apiPropertySeq"/>
    	
	<property expression="get-property('SYSTEM_TIME')" name="STARTCLASSMEDIATOR" scope="default" type="LONG" xmlns:ns="http://org.apache.synapse/xsd"/>

	<class name="com.wso2telco.dep.mediator.HandlerMediator">
        	<axis2ns5:property name="executorClass"
            	value="com.wso2telco.dep.mediator.impl.payment.PaymentExecutor" xmlns:axis2ns5="http://ws.apache.org/ns/synapse"/>
    	</class>

	<property expression="get-property('SYSTEM_TIME')" name="STARTNASHORNMEDIATOR" scope="default" type="LONG" xmlns:ns="http://org.apache.synapse/xsd"/>

	<class name="com.wso2telco.dep.mediator.impl.payment.ClientCorelatorMediator"/>

        <property expression="get-property('SYSTEM_TIME')" name="INSEQ_END" scope="default" type="LONG" xmlns:ns="http://org.apache.synapse/xsd"/>
       
   	 <switch source="get-property('HANDLER')" xmlns:ns="http://org.apache.synapse/xsd">
        	<case regex="QueryPaymentStatusHandler">
           		 <sequence key="paymentStatusSeq"/>
        	</case>
      	 	 <case regex="AmountChargeHandler">
           		 <sequence key="paymentChargeSeq"/>
       		 </case>
        	<case regex="AmountRefundHandler">
            		<sequence key="paymentRefundSeq"/>
       	 	</case>
       		 <case regex="ListTransactionsHandler">
           		 <sequence key="paymentListTransactionsSeq"/>
        	</case>
        	<default/>
   	 </switch>

 </sequence>
